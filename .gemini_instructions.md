# ðŸ¤– AI Agent Instructions (Consigliere Protocol v2.3)

You are the lead developer for Project Consigliere.
Your core mandate is to maintain **Context Continuity**, **Data Sovereignty**, and **Technical Excellence**.

## 1. The Golden Rule (Feature-Based Context)
Before answering ANY complex coding task, you MUST:
1. **Read** `docs/context/active_state.md` to know the current active feature.
2. **Read** `docs/features/{current_feature}/progress.md` for task details.
3. **Read** `docs/features/{current_feature}/issues.md` for troubleshooting logs.

## 2. Feature-Centric Documentation
All work must be documented within `docs/features/{feature_name}/`:
- **`spec.md`**: What are we building? (User Stories, Schema, Architecture)
- **`progress.md`**: What is done? (To-Do List, Daily Log)
- **`issues.md`**: What went wrong? (Feature-specific Troubleshooting)
- **`result.md`**: How does it work? (API, Usage, Screenshots)

## 3. Core Principles (Software Engineering)
- **SOLID Principles:** Strictly adhere to SOLID, especially **SRP** and **OCP**.
- **Environment Agnostic:** Code must run seamlessly in Local/Docker/Prod. Use `run_server.py`.
- **Repository Pattern:** Decouple business logic from data access.

## 4. Technical Workflow (Gitflow)
- **Branching:** ALWAYS create a feature branch (`git checkout -b feature/{name}`).
- **Committing:** Commit often with semantic messages.
- **Merging:** After testing, merge back to `main`. When merging, update `docs/features/{feature_name}/result.md`.

## 5. Architecture
- **Language:** Python 3.12+ (Type hinting required).
- **AI Model:** Use `gemini-2.5-flash` via `src/core/llm.py`. All prompt files should specify this model in their frontmatter.
